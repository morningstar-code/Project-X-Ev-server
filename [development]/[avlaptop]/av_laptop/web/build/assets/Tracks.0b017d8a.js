import{E as _,F as k,G as z,L as N,K as b,a as e,j as r,aq as x,a5 as j,ay as y,r as u}from"./index.75547906.js";import{S as A}from"./SearchBar.fdf78079.js";import{d as G}from"./Visibility.122d2ec0.js";import{a as K}from"./LocationOn.5c5bb029.js";import{T as J}from"./Typography.891e39a8.js";import{d as Q}from"./Add.57b35495.js";import{d as U}from"./HighlightOff.443e5658.js";import{T as X,a as Y,e as Z,c as R,d as l,b as ee}from"./TableRow.11ed307c.js";import{F as te,I as ae}from"./FormControl.ee184ca9.js";import{S as re}from"./Select.4a83c0db.js";import{M as m}from"./MenuItem.a42a82cb.js";import{B as ne}from"./Box.f78ee465.js";import{F as ie}from"./Fab.aab5fa96.js";import"./InputBase.c44c9015.js";import"./extendSxProp.03d0c3b1.js";import"./Paper.2c015233.js";var T={},oe=k.exports;Object.defineProperty(T,"__esModule",{value:!0});var B=T.default=void 0,le=oe(_()),se=z,ce=(0,le.default)((0,se.jsx)("path",{d:"M11 6H9V4h2v2zm4-2h-2v2h2V4zM9 14h2v-2H9v2zm10-4V8h-2v2h2zm0 4v-2h-2v2h2zm-6 0h2v-2h-2v2zm6-10h-2v2h2V4zm-6 4V6h-2v2h2zm-6 2V8h2V6H7V4H5v16h2v-8h2v-2H7zm8 2h2v-2h-2v2zm-4-2v2h2v-2h-2zM9 8v2h2V8H9zm4 2h2V8h-2v2zm2-4v2h2V6h-2z"}),"SportsScore");B=T.default=ce;var $={},de=k.exports;Object.defineProperty($,"__esModule",{value:!0});var D=$.default=void 0,he=de(_()),pe=z,ue=(0,he.default)((0,pe.jsx)("path",{d:"M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2zM5 8V7h2v3.82C5.84 10.4 5 9.3 5 8zm14 0c0 1.3-.84 2.4-2 2.82V7h2v1z"}),"EmojiEvents");D=$.default=ue;var L={},me=k.exports;Object.defineProperty(L,"__esModule",{value:!0});var I=L.default=void 0,fe=me(_()),ve=z,ge=(0,fe.default)((0,ve.jsx)("path",{d:"M6.2 3.01C4.44 2.89 3 4.42 3 6.19V16c0 2.76 2.24 5 5 5s5-2.24 5-5V8c0-1.66 1.34-3 3-3s3 1.34 3 3v7h-.83c-1.61 0-3.06 1.18-3.17 2.79-.12 1.69 1.16 3.1 2.8 3.21 1.76.12 3.2-1.42 3.2-3.18V8c0-2.76-2.24-5-5-5s-5 2.24-5 5v8c0 1.66-1.34 3-3 3s-3-1.34-3-3V9h.83C7.44 9 8.89 7.82 9 6.21c.11-1.68-1.17-3.1-2.8-3.2z"}),"Earbuds");I=L.default=ge;const xe=({tracks:s,handleNewEvent:c,openLeaderboard:n})=>{const d=N(),{createRace:v,deleteRace:g}=b(t=>t.racing),{lang:i}=b(t=>t.lang),w=t=>{j.post("https://av_racing/preview",{checkpoints:t})},C=(t,h)=>{const S=[{name:"message",title:i.racing.delete_warning,icon:"fa-solid fa-triangle-exclamation",type:"message"}];d(y({inputTitle:`${i.racing.delete_track}: ${h}`,inputOptions:S,inputEvent:"deleteTrack",inputData:{id:t},showInput:!0,showClass:!1}))};return e("div",{children:s.map((t,h)=>r("div",{className:"track-container",children:[e("span",{style:{padding:"10px",width:"calc(90%)",fontSize:"18px",fontWeight:"500",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.name}),e("span",{style:{marginLeft:"10px",height:"100px",fontSize:"14px",width:"90%",fontStyle:"italic",overflow:"auto",marginBottom:"5px"},children:t.description}),r("span",{style:{display:"flex",marginLeft:"5px",float:"left",color:"rgba(255,255,255,0.65)"},children:[e(I,{fontSize:"small"}),e(J,{fontSize:"small",children:`${t.distance} ${i.racing.distance_unit}.`})]}),r("span",{className:"button",children:[e(x,{title:i.racing.preview,children:e(G,{fontSize:"small",sx:{marginRight:"5px"},onClick:()=>{w(t.checkpoints)}})}),v&&e(x,{title:i.racing.create_race,children:e(B,{fontSize:"small",sx:{marginRight:"5px"},onClick:()=>{c(t)}})}),e(x,{title:i.racing.leaderboard,children:e(D,{fontSize:"small",sx:{marginRight:"5px"},onClick:()=>{n(t.name)}})}),g&&e(x,{title:i.racing.delete_track,children:e(K,{fontSize:"small",sx:{marginRight:"5px"},onClick:()=>{C(t.identifier,t.name)}})})]})]},h))})},be=({racers:s,lang:c})=>e("div",{children:e(X,{sx:{color:"white"},children:r(Y,{sx:{width:"450px",color:"white"},"aria-label":"simple table",children:[e(Z,{sx:{color:"white"},children:r(R,{sx:{color:"white"},children:[e(l,{sx:{color:"white"},children:"#"}),e(l,{align:"left",sx:{color:"white"},children:c.racer}),e(l,{align:"left",sx:{color:"white"},children:c.vehicle}),e(l,{align:"left",sx:{color:"white"},children:c.best_time})]})}),e(ee,{children:s.map((n,d)=>r(R,{sx:{"&:last-child td, &:last-child th":{border:0},color:"white"},children:[e(l,{component:"th",scope:"row",sx:{color:"rgba(255,255,255,0.9)",fontWeight:"500"},children:d+1}),e(l,{align:"left",sx:{color:"rgba(255,255,255,0.9)"},children:n.name}),e(l,{align:"left",sx:{color:"rgba(255,255,255,0.9)"},children:n.vehicle}),e(l,{align:"left",sx:{color:"rgba(255,255,255,0.9)"},children:n.bestTime})]},d))})]})})});const Ie=()=>{const{lang:s}=b(a=>a.lang),{circuitPermission:c,trackList:n}=b(a=>a.racing),d=N(),[v,g]=u.exports.useState(n),[i,w]=u.exports.useState(""),[C,t]=u.exports.useState(!1),[h,S]=u.exports.useState("D"),[M,E]=u.exports.useState([]),[H,V]=u.exports.useState([]),q=({target:a})=>{S(a.value);const o=a.value,p=M.filter(f=>f.class.includes(o));V(p)},O=async a=>{const o=await j.post("https://av_racing/getLeaderboard",{track:a});if(o.data){E(o.data);const p=o.data.filter(f=>f.class.includes(h));V(p),w(a),t(!0)}},P=({target:a})=>{const o=a.value.toLowerCase(),p=n.filter(f=>o==""?!1:f.name.toLowerCase().includes(o));p[0]?g(p):g(n)},F=a=>{d(y({inputTitle:"Create Race",inputOptions:[{name:"eventName",title:"Event Name",icon:"fa-solid fa-calendar-check",type:"text"},{name:"buyin",title:"Buy In",icon:"fas fa-hand-holding-usd",type:"number"},{name:"laps",title:"Laps (0 is drag)",icon:"fa-solid fa-flag-checkered",type:"number"},{name:"password",title:"Password (optional)",icon:"fa-solid fa-key",type:"text"},{name:"startsin",title:"Starts in (minutes)",icon:"fa-solid fa-clock",type:"number"},{name:"description",title:"Description",icon:"fa-solid fa-file-lines",type:"text"}],inputEvent:"newRace",inputData:a,showInput:!0,showClass:!0}))},W=()=>{d(y({inputTitle:"Create Circuit",inputOptions:[{name:"trackName",title:"Circuit Name",icon:"fa-solid fa-flag-checkered",type:"text"},{name:"trackDescription",title:"Circuit Description",icon:"fa-solid fa-file-lines",type:"text"}],inputEvent:"newCircuit",inputData:[],showInput:!0,showClass:!1}))};return r("div",{children:[C&&e("div",{className:"leaderboard-container",children:r("span",{className:"leaderboard-card",children:[e(U,{sx:{color:"rgba(200,200,200,1)",position:"absolute",display:"flex",float:"right",width:"870px",marginTop:"5px"},fontSize:"small",onClick:()=>{t(!1)}}),e("span",{className:"leaderboard-header",children:i}),e("span",{className:"leaderboard-trackName",children:"Best Lap Time"}),e("span",{className:"leaderboard-class",children:r(te,{variant:"standard",sx:{m:1,width:"calc(95%)"},children:[e(ae,{id:"demo-simple-select-standard-label",sx:{color:"rgba(255,255,255,0.75)",fontWeight:"500"},focused:!1,children:"Vehicle Class"}),r(re,{labelId:"demo-simple-select-standard-label",id:"demo-simple-select-standard",value:h,onChange:q,label:"Age",sx:{color:"rgba(255,255,255,0.95)",width:"calc(100%)",justifyContent:"center",alignContent:"center",alignItems:"center",textAlign:"center",fontWeight:"600","&:before":{backgroundColor:"none",border:"none"},"&:after":{backgroundColor:"none",border:"none"},"&:hover:not(.Mui-disabled):before":{backgroundColor:"none",border:"none"},"&:exit":{backgroundColor:"none"},".MuiSvgIcon-root ":{fill:"white !important"}},color:"success",children:[e(m,{value:"S",children:"S"}),e(m,{value:"A",children:"A"}),e(m,{value:"B",children:"B"}),e(m,{value:"C",children:"C"}),e(m,{value:"D",children:"D"}),e(m,{value:"M",children:"M"})]})]})}),e("span",{className:"leaderboard-results",children:e(be,{racers:H,lang:s.racing})})]})}),r("span",{style:{display:"inline-flex",marginTop:"10px",marginLeft:"20px",marginBottom:"20px"},children:[e("a",{style:{marginTop:"10px",color:"white",fontWeight:"600",fontSize:"25px"},children:`${v.length} ${s.racing.tracks}`}),e(A,{handleSearch:P})]}),e("span",{style:{display:"flex",marginLeft:"20px",marginBottom:"20px"},children:e(xe,{tracks:v,handleNewEvent:F,openLeaderboard:O})}),c&&e(ne,{alignSelf:"right",sx:{position:"fixed",bottom:"0",right:"0",marginBottom:"10px"},children:r(ie,{color:"primary","aria-label":"add",variant:"extended",onClick:W,style:{float:"right",right:"0",marginRight:"15px",marginBottom:"10px"},children:[e(Q,{}),s.racing.create_button]})})]})};export{Ie as default};
